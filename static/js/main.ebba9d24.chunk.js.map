{"version":3,"sources":["config/index.js","utils/util.js","components/image-preview/index.js","utils/make-request.js","pages/image/index.js","store/api/index.js","pages/index/index.js","reportWebVitals.js","index.js"],"names":["QINIU_HOST_NAME","isPC","userAgentInfo","navigator","userAgent","Agents","flag","v","length","indexOf","getSmallImgSrc","originUrl","imgWidth","startx","endx","ImagePreview","props","onBindTouchStart","e","touch","changedTouches","clientX","clientY","onBindTouchMove","target","classList","contains","onToNext","onToLast","preViewIndex","state","setState","imageList","onGetMoreData","onBindKeyUp","keyCode","onCancelModal","stopPropagation","preventDefault","cancelModal","onClickImg","console","log","onDownLoadImg","imgsrc","_name","origin_name","image","Image","setAttribute","onload","canvas","document","createElement","width","height","getContext","drawImage","url","toDataURL","a","event","MouseEvent","download","href","dispatchEvent","src","onGetSmallImgSrc","onComputeImgWidth","imgRef","current","offsetWidth","React","createRef","window","addEventListener","this","setTimeout","showBtnLine","removeEventListener","preViewSrc","realUrl","centered","visible","footer","onCancel","style","className","maskStyle","background","onClick","LeftOutlined","fontSize","margin","alt","ref","showDesc","CloseOutlined","onTouchEnd","userSelect","RightOutlined","Component","makeRequest","method","data","headers","options","stringify","params","Promise","resolve","reject","axios","then","resp","catch","msg","message","error","Search","Input","ImageManage","onGetSmallPic","imageListWrapRef","imgs","querySelectorAll","parentNode","fakeImageItemRef","onSetSearchMaxWidth","searchMaxWidth","Math","min","onJudgeMobile","isMobile","onJudgeScreenWidth","marinSearchSize","clientWidth","body","onBindScroll","pageNo","imageTotal","loading","scrollTop","documentElement","getScrollTop","clientHeight","max","scrollHeight","onGetImages","isNewLoad","searchVal","extraLoadTimes","pageSize","search","type","res","count","dataList","map","item","pureQiniuKey","qiniu_key","replace","description","stamp","qiniuKey","Number","Date","getTime","getOnePicCreatedStamp","formatedDate","timestamp","fmt","defaultval","date","setTime","o","getMonth","getDate","getHours","getMinutes","getSeconds","floor","S","getMilliseconds","k","test","RegExp","$1","getFullYear","substr","timeStampFormat","concat","forceUpdate","finally","onPreView","index","previewVisible","onSearch","val","onCopyLink","value","input","opacity","appendChild","select","execCommand","removeChild","copyLink","success","getImgSrc","placeholder","enterButton","size","maxWidth","visibility","title","placement","CopyTwoTone","twoToneColor","id","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ebba9d24.chunk.js","sourcesContent":["export const QINIU_HOST_NAME = 'http://img.uwayfly.com/';","//获取滚动条当前的位置\nexport function getScrollTop() {\n  var scrollTop = 0;\n  if (document.documentElement && document.documentElement.scrollTop) {\n      scrollTop = document.documentElement.scrollTop;\n  } else if(document.body) {\n      scrollTop = document.body.scrollTop;\n  }\n  return scrollTop;\n}\n\n//获取当前可视范围的高度  \nexport function getClientHeight() {\n  var clientHeight = 0;\n  if(document.body.clientHeight && document.documentElement.clientHeight) {\n      clientHeight = Math.min(document.body.clientHeight, document.documentElement.clientHeight);\n  } else {\n      clientHeight = Math.max(document.body.clientHeight, document.documentElement.clientHeight);\n  }\n  return clientHeight;\n}\n\n//获取文档完整的高度 \nexport function getScrollHeight() {\n  return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);\n}\n\n/**\n * 获取“一个”图片的原始创建日期 \n * @param {Number} qiniuKey \n * @returns {Number} stamp\n */\nexport function getOnePicCreatedStamp(qiniuKey) {\n  // console.log('qiniuKey', qiniuKey)\n  if (!qiniuKey) {\n    return;\n  }\n  qiniuKey = Number(qiniuKey)\n\n  const todayStamp = new Date('2021-02-07').getTime();\n  const oneDay = 24 * 60 * 60 * 1000;\n  const todayKey = 3046;\n  const stamp = todayStamp - (todayKey - qiniuKey) * oneDay\n\n  return stamp;\n}\n\n// unix时间戳格式化显示\nexport function timeStampFormat(timestamp, fmt, defaultval) {\n  if (!timestamp || timestamp == '0') {\n    return defaultval || '';\n  }\n  const date = new Date();\n  if ((`${timestamp}`).length == 10) {\n    timestamp = timestamp * 1000;\n  }\n  date.setTime(timestamp);\n  const o = {\n    'M+': date.getMonth() + 1, // 月份\n    'd+': date.getDate(), // 日\n    'h+': date.getHours(), // 小时\n    'm+': date.getMinutes(), // 分\n    's+': date.getSeconds(), // 秒\n    'q+': Math.floor((date.getMonth() + 3) / 3), // 季度\n    S: date.getMilliseconds(), // 毫秒\n  };\n  if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (`${date.getFullYear()}`).substr(4 - RegExp.$1.length));\n  for (const k in o) {\n    if (new RegExp(`(${k})`).test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((`00${o[k]}`).substr((`${o[k]}`).length)));\n  }\n  return fmt;\n};\n\n\nexport function copyLink(value) {\n  const input = document.createElement(\"input\");\n    input.value = value;\n    input.style.opacity = 0;\n    document.body.appendChild(input);\n    input.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(input);\n}\n\n\n// 判断是否是PC端\nexport function isPC() {\n  var userAgentInfo = navigator.userAgent;\n  var Agents = [\"Android\", \"iPhone\",\n              \"SymbianOS\", \"Windows Phone\",\n              \"iPad\", \"iPod\"];\n  var flag = true;\n  for (var v = 0; v < Agents.length; v++) {\n      if (userAgentInfo.indexOf(Agents[v]) > 0) {\n          flag = false;\n          break;\n      }\n  }\n  return flag;\n}\n\n// 获取小图链接\nexport const getSmallImgSrc = (originUrl, imgWidth) => {\n    return `${originUrl}?imageView2/2/w/${imgWidth}`\n}\n\n","import React from \"react\";\nimport { Modal } from \"antd\";\nimport {\n  RightOutlined,\n  LeftOutlined,\n  CloseOutlined,\n} from \"@ant-design/icons\";\n\nimport { QINIU_HOST_NAME } from '../../config'\nimport {\n  getSmallImgSrc\n} from '../../utils/util';\nimport \"./index.scss\";\n\n\nconst getWholeUrl = (item) => {\n  if (!item) return ''\n  return QINIU_HOST_NAME + item.qiniu_key\n}\nlet startx = 0\nlet starty = 0\nlet endy = 0\nlet endx = 0\n\n// 图片预览\nclass ImagePreview extends React.Component{\n  constructor(props) {\n    super(props)\n    this.imgRef = React.createRef();\n\n    this.state = {\n      preViewIndex: props.preViewIndex || 0,\n      imgWidth: 0,\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('keyup', this.onBindKeyUp)\n    window.addEventListener('touchstart', this.onBindTouchStart)\n    window.addEventListener('touchend', this.onBindTouchMove)\n    setTimeout(() => {\n      this.setState({\n        showBtnLine: true,\n      })\n    }, 400)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keyup', this.onBindKeyUp)\n    window.removeEventListener('touchstart', this.onBindTouchStart)\n    window.removeEventListener('touchend', this.onBindTouchMove)\n  }\n\n  onBindTouchStart = (e) => {\n    var touch = e.changedTouches;  \n    startx = touch[0].clientX; \n    starty = touch[0].clientY;\n  }\n\n  onBindTouchMove = (e) => {\n    if (e.target && e.target.classList) {\n      if (e.target.classList.contains('description')) {\n        return\n      }\n    }\n    \n    var touch = e.changedTouches;  \n    endx = touch[0].clientX;  \n    endy = touch[0].clientY; \n    if (startx - endx > 10) {\n      this.onToNext()\n    } else if (startx - endx < -10) {\n      this.onToLast()\n    }\n  }\n\n  onToLast = () => {\n    const { preViewIndex } = this.state\n    if (preViewIndex <= 0) return\n    this.setState({\n      preViewIndex: preViewIndex - 1\n    })\n  }\n \n  onToNext = () => {\n    const { preViewIndex } = this.state\n    const { imageList, onGetMoreData } = this.props\n    if (preViewIndex >= imageList.length - 3) {\n      if (typeof onGetMoreData === 'function') {\n        onGetMoreData()\n      }\n    }\n    if (preViewIndex >= imageList.length - 1) {\n      return \n    }\n    this.setState({\n      preViewIndex: preViewIndex + 1\n    })\n  }\n\n  onBindKeyUp = (e) => {\n    if (e.keyCode === 37) {\n      this.onToLast()\n    } else if (e.keyCode === 39) {\n      this.onToNext()\n    }\n  }\n\n  onCancelModal = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    this.props.cancelModal();\n  }\n\n  onClickImg = (e) => {\n    console.log(e)\n  }\n\n  onDownLoadImg = (imgsrc) => {\n    const { imageList } = this.props\n    const { preViewIndex } = this.state\n    const _name = imageList[preViewIndex].origin_name\n\n    let image = new Image();\n    // 解决跨域 Canvas 污染问题\n    image.setAttribute(\"crossOrigin\", \"anonymous\");\n    image.onload = function() {\n      let canvas = document.createElement(\"canvas\");\n      canvas.width = image.width;\n      canvas.height = image.height;\n      let context = canvas.getContext(\"2d\");\n      context.drawImage(image, 0, 0, image.width, image.height);\n      let url = canvas.toDataURL(\"image/png\"); //得到图片的base64编码数据\n      let a = document.createElement(\"a\"); // 生成一个a元素\n      let event = new MouseEvent(\"click\"); // 创建一个单击事件\n      a.download = _name || \"photo\"; // 设置图片名称\n      a.href = url; // 将生成的URL设置为a.href属性\n      a.dispatchEvent(event); // 触发a的单击事件\n    };\n    image.src = imgsrc;\n  }\n\n  onGetSmallImgSrc = (url) => {\n    const { imgWidth } = this.state;\n    console.log('imgWidth: ', imgWidth)\n\n    if (!imgWidth) {\n      this.onComputeImgWidth();\n      return url;\n    }\n    return getSmallImgSrc(url, imgWidth)\n  }\n\n  onComputeImgWidth = () => {\n    if (this.imgRef.current) {\n      const { current } = this.imgRef;\n\n      this.imgRef.current.onload = () => {\n          console.log('onload offsetWidth', current.offsetWidth)\n          this.setState({\n            imgWidth: current.offsetWidth * 2\n\n          })\n      }\n    }\n  }\n\n  render() {\n    const { imageList } = this.props\n    const { preViewIndex, showBtnLine } = this.state\n    const preViewSrc = imageList[preViewIndex].realUrl\n\n    return (\n      <Modal \n        centered \n        visible={true} \n        footer={null} \n        onCancel={this.props.cancelModal}\n        style={{width: 'auto'}}\n        className='priview-modal'\n        maskStyle={{ background: 'rgba(0, 0, 0, 0.9)' }}\n      >\n        <div className={`btn-line ${showBtnLine ? 'show' : ''}`}>\n          <a href={preViewSrc} target='_blank' className='check-origin-img btn'>\n            查看原图\n          </a>\n          <span\n            className='download-img btn'\n            onClick={()=>this.onDownLoadImg(preViewSrc)}\n          >\n            下载\n          </span>\n        </div>\n        <div className='half-preview half-left' onClick={this.onToLast}>\n          { preViewIndex > 0 &&\n            <span className='preview-handle last-one'>\n              上一张\n              <LeftOutlined style={{ fontSize: 50, margin: '0 6px' }} />\n            </span>\n          }\n        </div>\n        <div className='img-wrap'>\n            <img alt=\"\" src={this.onGetSmallImgSrc(preViewSrc)} onClick={this.onClickImg} ref={this.imgRef} />\n          <div className='description'>\n            {imageList[preViewIndex] && imageList[preViewIndex].showDesc}\n          </div>\n          <CloseOutlined \n            onClick={this.onCancelModal} \n            onTouchEnd={this.onCancelModal}\n            style={{userSelect: 'none'}}\n          />\n        </div>\n        <div className='half-preview half-right' onClick={this.onToNext}>\n          { (preViewIndex < imageList.length - 1) &&\n            <span className='preview-handle next-one'>\n              <RightOutlined style={{ fontSize: 50, margin: '0 6px' }} />\n              下一张\n            </span>\n          }\n        </div>\n        \n      </Modal>\n    )\n  }\n}\n\nexport default ImagePreview;\n","import axios from 'axios';\nimport { stringify } from 'qs';\nimport { message } from 'antd';\n\nfunction makeRequest({\n  url,\n  method = 'GET',\n  data = {},\n  headers = {},\n}) {\n  const options = {\n    method,\n    data,\n    url,\n    headers: {\n      ...headers,\n      // Authorization,\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n  };\n  if (method === \"POST\" || method === \"PUT\") {\n    options.data = stringify(data);\n  } else {\n    options.params = data;\n  }\n\n  return new Promise((resolve, reject) => {\n    axios({\n      ...options,\n    }).then( resp => {\n      resolve({\n        data: resp.data\n      })\n    }).catch(e => {\n      if (e.msg) {\n        message.error(e.msg);\n      }\n    })\n  })\n}\n\nexport default makeRequest;\n\n","import React from 'react';\nimport { Tooltip, Input, message, BackTop } from 'antd';\nimport LazyLoad from 'react-lazyload';\nimport {\n  CopyTwoTone,\n} from \"@ant-design/icons\";\n\nimport ImagePreview from '../../components/image-preview'\nimport {\n  getScrollHeight,\n  getScrollTop,\n  getClientHeight,\n  getOnePicCreatedStamp,\n  timeStampFormat,\n  copyLink,\n  isPC,\n  getSmallImgSrc\n} from '../../utils/util'\nimport { QINIU_HOST_NAME } from '../../config';\nimport { getImages } from '../../store/api'\nimport './index.scss'\n\nconst { Search } = Input;\n\nclass ImageManage extends React.Component{\n  constructor(props) {\n    super(props)\n\n    this.imageListWrapRef = React.createRef();\n    this.fakeImageItemRef = React.createRef();\n\n    this.state = {\n      imageList: [],\n      imageTotal: -1,\n      loading: true,\n      \n      preViewIndex: 0,\n      previewVisible: false,\n\n      searchVal: '',\n      pageNo: 1,\n      extraLoadTimes: 0,\n\n      marinSearchSize: 'default', // 搜索框尺寸\n      searchMaxWidth: 630, // 搜索框最大宽度\n\n      imgWidth: 300,\n\n    }\n  }\n\n  componentDidMount() {\n    this.onGetImages();\n    this.onJudgeScreenWidth();\n    this.onJudgeMobile();\n    this.onSetSearchMaxWidth();\n    window.addEventListener(\"scroll\", this.onBindScroll);\n    this.onGetSmallPic();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.onBindScroll);\n  }\n\n  onGetSmallPic = () => {\n    if (this.imageListWrapRef && this.imageListWrapRef.current) {\n      const imgs = this.imageListWrapRef.current.querySelectorAll('img');\n      if (imgs && imgs[0]) {\n        this.setState({\n          imgWidth: imgs[0].parentNode.offsetWidth * 2\n        }, () => {\n          this.fakeImageItemRef.current.style = 'display: none;';\n        })\n      }\n    }\n  }\n\n  onSetSearchMaxWidth = () => {\n    if (this.imageListWrapRef \n        && this.imageListWrapRef.current \n        && this.imageListWrapRef.current.offsetWidth\n      ) {\n      this.setState({\n        searchMaxWidth: Math.min(630, this.imageListWrapRef.current.offsetWidth)\n      })\n    }\n  }\n\n  onJudgeMobile = () => {\n    this.setState({\n      isMobile: !isPC()\n    })\n  }\n  onJudgeScreenWidth = () => {\n    let marinSearchSize = 'default'\n    const { clientWidth } = document.body;\n\n    if (clientWidth < 1000) {\n      marinSearchSize = 'default';\n    } else if (clientWidth < 600) {\n      marinSearchSize = 'small'\n    }\n\n    this.setState({\n      marinSearchSize\n    })\n  }\n\n  onBindScroll = () => {\n    const { pageNo, imageTotal, imageList, loading } = this.state;\n    if (imageTotal <= imageList.length || loading) return;\n\n    if (getScrollTop() + getClientHeight() + 100 >= getScrollHeight()) {\n      // console.log('下拉刷新了')\n      this.setState(\n        {\n          pageNo: pageNo + 1,\n        },\n        () => {\n          this.onGetImages();\n        }\n      );\n    }\n  }\n\n  onGetImages = (isNewLoad) => {\n    let { imageList, imageTotal, pageNo, searchVal, extraLoadTimes } = this.state;\n\n    this.setState({\n      loading: true,\n    })\n\n    getImages({\n      pageNo,\n      pageSize: 8,\n      search: searchVal,\n    }).then(res => {\n      const data = res.data || {};\n      imageTotal = data.count || 0;\n      const dataList = data.data || [];\n      \n      dataList.map(item => {\n        item.pureQiniuKey = item.qiniu_key.replace('.jpg', '');\n        item.realUrl = QINIU_HOST_NAME + item.qiniu_key;\n        item.showDesc = `${item.description} - ${item.pureQiniuKey}`;\n\n        if (!item.stamp && item.qiniu_key) {\n          item.stamp = getOnePicCreatedStamp(item.pureQiniuKey);\n        } else {\n          item.stamp = item.stamp * 1000;\n        }\n        item.formatedDate = timeStampFormat(item.stamp, 'yyyy-MM-dd')\n      })\n\n      if (isNewLoad) {\n        imageList = dataList;\n      } else {\n        imageList = imageList.concat(dataList);\n      }\n\n      this.setState({\n        imageList,\n        imageTotal,\n        extraLoadTimes: extraLoadTimes + 1\n      }, () => {\n        if (imageTotal > imageList.length && extraLoadTimes < 4) {\n          this.onGetMoreData();\n        }\n      })\n      this.forceUpdate();\n\n    }).finally(() => {\n      this.setState({\n        loading: false\n      })\n    })\n  }\n\n  onPreView = (e, item, index) => {\n    e.stopPropagation();\n    this.setState({\n      preViewIndex: index,\n      previewVisible: true,\n    });\n  };\n\n  onSearch = (val) => {\n    this.setState(\n      {\n        searchVal: val,\n        isNewLoad: true,\n        pageNo: 1,\n        extraLoadTimes: 0\n      },\n      () => {\n        this.onGetImages(true);\n      }\n    );\n  };\n\n  onCopyLink = (e, item) => {\n    e.stopPropagation();\n    const value = QINIU_HOST_NAME + item.qiniu_key;\n    copyLink(value);\n\n    message.success(`${value} 复制成功 🎉`);\n  }\n\n  onGetMoreData = () => {\n    const { pageNo } = this.state\n    this.setState({\n      pageNo: pageNo + 1\n    }, () => {\n      this.onGetImages()\n    })\n  }\n\n  getImgSrc = (item) => {\n    const { imgWidth } = this.state;\n    return getSmallImgSrc(item.realUrl, imgWidth)\n  }\n\n  render() {\n    const { \n      imageList, \n      isMobile, \n      loading, \n      imageTotal, \n      marinSearchSize, \n      previewVisible, \n      preViewIndex, \n      searchMaxWidth \n    } = this.state;\n\n    return (\n      <div className=\"image-container\">\n        <div className=\"search-wrap\">\n          <Search \n            placeholder=\"input search text\" \n            enterButton \n            onSearch={this.onSearch} \n            size={marinSearchSize} \n            style={{maxWidth: searchMaxWidth}}\n          />\n        </div>\n\n        <div className=\"images-list-wrap\" ref={this.imageListWrapRef}>\n          <div\n            className='image-item' \n            ref={this.fakeImageItemRef}\n            style={{ visibility: 'hidden'}}\n          >\n              <div className=\"image-wrap\">\n                <img\n                  src=\"http://img.uwayfly.com/3046.jpg\"\n                  alt=\"\"\n                  className=\"main-image\"\n                />\n              </div>\n          </div>\n          {imageList.map((item, index) => (\n            <div\n              key={item.id}\n              className='image-item' \n              onClick={(e) => this.onPreView(e,item, index)}\n            >\n              <div className=\"image-wrap\">\n                <Tooltip title={isMobile ? \"\" : item.showDesc} placement=\"bottom\">\n                  <LazyLoad height={200}>\n                    <img\n                      src={this.getImgSrc(item)}\n                      alt=\"\"\n                      className=\"main-image\"\n                    />\n                  </LazyLoad>\n                </Tooltip>\n                {!isMobile && <div className=\"btn-line\">\n                  <span className=\"btn-line-left\">\n                  </span>\n                  <span className=\"btn-line-right\">\n                    <Tooltip title=\"复制链接\" placement=\"top\">\n                      <CopyTwoTone\n                        style={{ fontSize: 16 }}\n                        twoToneColor=\"#52c41a \"\n                        onClick={(e) => this.onCopyLink(e, item)}\n                      />\n                    </Tooltip>\n                  </span>\n                  </div>\n                }\n              </div>\n              <span className=\"image-title\">{item.formatedDate}</span>\n            </div>\n          ))}\n          <div className=\"image-item-place\"></div>\n          <div className=\"image-item-place\"></div>\n          <div className=\"image-item-place\"></div>\n          <div className=\"image-item-place\"></div>\n          <div className=\"image-item-place\"></div>\n          <div className=\"image-item-place\"></div>\n          {imageTotal === 0 && \n            <div className=\"no-data\">\n              {loading ? \"正在加载...\" : '暂无数据'}\n            </div>\n          }\n        </div>\n\n        <div className={`loading-images`}>\n          {imageTotal <= 0 ? null : imageList.length >= imageTotal ? (\n            <span>\n              <i>————</i>\n              <span>我也是有底线的</span>\n              <i>————</i>\n            </span>\n          ) : loading ? (\n            \"正在加载...\"\n          ) : (\n            \"下拉加载更多\"\n          )}\n        </div>\n\n        {previewVisible && (\n          <ImagePreview\n            imageList={imageList}\n            preViewIndex={preViewIndex}\n            onGetMoreData={this.onGetMoreData}\n            cancelModal={() => this.setState({ previewVisible: false })}\n          />\n        )}\n\n        <BackTop />\n      </div>\n    )\n  }\n}\n\n\nexport default ImageManage;","import makeRequest from '../../utils/make-request';\n\nconst BASE_URL = 'https://uwayfly.com/api';\n\nexport function getImages(data) {\n  return makeRequest({\n    url: `${BASE_URL}/images`,\n    data: {\n      ...data,\n      type: 'one',\n    }\n  })\n} \n\n","import ImageManage from '../image'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ImageManage />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './static/css/reset.css';\nimport 'antd/dist/antd.css';\nimport App from './pages/index';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}